<?xml version="1.0" encoding="UTF-8"?>
<Patch>

	<Operation Class="PatchOperationSequence">
		<success>Always</success>
		<operations>
            <li Class="PatchOperationTest">
                <xpath>/Defs/ThingDef[@ParentName = "BasedWeapon"]/comps/li[@Class = "Rimatomics.CompProperties_Upgradable"]/../../constructEffect</xpath>
            </li>
            <li Class="PatchOperationRemove">
                <xpath>/Defs/ThingDef[@ParentName = "BasedWeapon"]/comps/li[@Class = "Rimatomics.CompProperties_Upgradable"]/../../constructEffect</xpath>
            </li>
            <li Class="PatchOperationTest">
                <xpath>/Defs/ThingDef[@ParentName = "BasedWeapon"]/comps/li[@Class = "Rimatomics.CompProperties_Upgradable"]/../../costStuffCount</xpath>
            </li>
            <li Class="PatchOperationRemove">
                <xpath>/Defs/ThingDef[@ParentName = "BasedWeapon"]/comps/li[@Class = "Rimatomics.CompProperties_Upgradable"]/../../costStuffCount</xpath>
            </li>
        </operations>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/ThingDef[@ParentName = "BasedWeapon"]/comps/li[@Class = "Rimatomics.CompProperties_Upgradable"]/../..</xpath>
        <value>
            <stuffCategories><li>Metallic</li></stuffCategories><costStuffCount>10</costStuffCount>
        </value>
    </Operation>

    <!-- Edits specific to Tesla Coil -->
    <Operation Class="PatchOperationSequence">
		<success>Always</success>
		<operations>
            <li Class="PatchOperationRemove">
                <xpath>/Defs/ThingDef[defName = "PPCTeslaCoil"]/graphicData/shaderType</xpath>
            </li>
            <li Class="PatchOperationAdd">
                <xpath>/Defs/ThingDef[defName = "PPCTeslaCoil"]/graphicData</xpath>
                <value>
                    <shaderType>CutoutComplex</shaderType>
                </value>
            </li>
        </operations>
    </Operation>

    <!-- Add VG recipes to Self Cooker -->
    <Operation Class="PatchOperationSequence">
		<success>Always</success>
		<operations>
            <li Class="ModCheck.isModLoaded">
                <modName>VGP Garden Gourmet</modName>
                <yourMod>Rimatomics: Better Weapons</yourMod>
                <errorOnFail>true</errorOnFail>
            </li>
            <li Class="PatchOperationAdd">
                <xpath>/Defs/ThingDef[thingClass = "ProjectRimFactory.SAL3.Things.Assemblers.Building_SimpleAssembler"]/recipes</xpath>
                <value>
                    <li>CraftFlour</li>
                    <li>GroundSugar</li>
                    <li>CraftCornmeal</li>
                    <li>Makesoycheese</li>
                    <li>Maketofu</li>
                    <li>MakePolenta</li>
                    <li>BakeBread</li>
                    <li>CraftChocolate</li>
                </value>
            </li>
        </operations>
    </Operation>

</Patch>